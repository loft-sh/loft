---
title: Virtual Clusters
sidebar_label: Virtual Clusters
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem'
import Field from '@site/src/components/Field'
import APISpec from '@theme/ApiSchema'

import PartialVirtualClusterCreateUI from './_partials/vcluster/create-ui.mdx'
import PartialVirtualClusterCreateCLI from './_partials/vcluster/create-cli.mdx'
import PartialVirtualClusterCreateKubectl from './_partials/vcluster/create-kubectl.mdx'
import PartialVirtualClusterDeleteUI from './_partials/vcluster/delete-ui.mdx'
import PartialVirtualClusterDeleteCLI from './_partials/vcluster/delete-cli.mdx'
import PartialVirtualClusterDeleteKubectl from './_partials/vcluster/delete-kubectl.mdx'
import PartialVirtualClusterListUI from './_partials/vcluster/list-ui.mdx'
import PartialVirtualClusterListCLI from './_partials/vcluster/list-cli.mdx'
import PartialVirtualClusterListKubectl from './_partials/vcluster/list-kubectl.mdx'
import PartialVirtualClusterShareUI from './_partials/vcluster/share-ui.mdx'
import PartialVirtualClusterShareCLI from './_partials/vcluster/share-cli.mdx'


A virtual cluster is a fully functional Kubernetes cluster that runs inside the namespace of another Kubernetes cluster (host cluster). Virtual clusters are very useful if you are hitting the limits of namespaces and do not want to make special exceptions to the multi-tenancy configuration of the underlying cluster, e.g. a user needs their own CRD or user needs pods from 2 namespaces to communicate with each other but your standard NetworkPolicy does not allow this, then a virtual cluster may be perfect for this user.


## Working with Virtual Clusters
Unlike "real" clusters, virtual clusters are much more lightweight and much faster to spin up and tear down again.

<details>
  <summary>Create Virtual Clusters</summary>
  <Tabs
    defaultValue="cli"
    values={[
      {label: 'UI', value: 'ui'},
      {label: 'CLI', value: 'cli'},
      {label: 'kubectl', value: 'kubectl'},
    ]}>
    <TabItem value="ui">
      <PartialVirtualClusterCreateUI/>
    </TabItem>
    <TabItem value="cli">
      <PartialVirtualClusterCreateCLI/>
    </TabItem>
    <TabItem value="kubectl">
      <PartialVirtualClusterCreateKubectl/>
    </TabItem>
  </Tabs>
</details>

<details>
  <summary>Delete Virtual Clusters</summary>
  <Tabs
    defaultValue="cli"
    values={[
      {label: 'UI', value: 'ui'},
      {label: 'CLI', value: 'cli'},
      {label: 'kubectl', value: 'kubectl'},
    ]}>
    <TabItem value="ui">
      <PartialVirtualClusterDeleteUI/>
    </TabItem>
    <TabItem value="cli">
      <PartialVirtualClusterDeleteCLI/>
    </TabItem>
    <TabItem value="kubectl">
      <PartialVirtualClusterDeleteKubectl/>
    </TabItem>
  </Tabs>
</details>

<details>
  <summary>List Virtual Clusters</summary>
  <Tabs
    defaultValue="cli"
    values={[
      {label: 'UI', value: 'ui'},
      {label: 'CLI', value: 'cli'},
      {label: 'kubectl', value: 'kubectl'},
    ]}>
  <TabItem value="ui">
    <PartialVirtualClusterListUI/>
  </TabItem>
  <TabItem value="cli">
    <PartialVirtualClusterListCLI/>
  </TabItem>
  <TabItem value="kubectl">
    <PartialVirtualClusterListKubectl/></TabItem>
  </Tabs>
</details>

<details>
  <summary>Control Access To Virtual Cluster</summary>
  <Tabs
    defaultValue="cli"
    values={[
      {label: 'UI', value: 'ui'},
      {label: 'CLI', value: 'cli'},
    ]}>
    <TabItem value="ui"><PartialVirtualClusterShareUI/></TabItem>
    <TabItem value="cli"><PartialVirtualClusterShareCLI/></TabItem>
  </Tabs>
</details>


## Configuration

### Virtual Cluster Template
<Field crd="VirtualCluster" jsonPath='metadata.annotations["loft.sh/virtual-cluster-template"]' img={require('@site/static/media/v2/screenshots/virtual-clusters/field-template.png').default} />


### Metadata

#### Name
<Field crd="VirtualCluster" jsonPath="metadata.name" img={require('@site/static/media/v2/screenshots/virtual-clusters/field-name.png').default} />

#### Namespace
<Field crd="VirtualCluster" jsonPath="metadata.namespace" img={require('@site/static/media/v2/screenshots/virtual-clusters/field-namespace.png').default} />

#### Labels
<Field crd="VirtualCluster" jsonPath="metadata.labels" type="map[string]string" img={require('@site/static/media/v2/screenshots/virtual-clusters/field-labels.png').default} />

#### Annotations
<Field crd="VirtualCluster" jsonPath="metadata.annotations" type="map[string]string" img={require('@site/static/media/v2/screenshots/virtual-clusters/field-annotations.png').default} />



### Advanced Options

#### Version
<Field crd="VirtualCluster" jsonPath="spec.helmRelease.chart.version" img={require('@site/static/media/v2/screenshots/virtual-clusters/field-vcluster-version.png').default} />

#### Helm Values
<Field crd="VirtualCluster" jsonPath="spec.helmRelease.values" type="{}" img={require('@site/static/media/v2/screenshots/virtual-clusters/field-vcluster-values.png').default} />

#### Apps
<Field img={require('@site/static/media/v2/screenshots/virtual-clusters/field-apps.png').default} />

##### Namespaces For Apps
<Field img={require('@site/static/media/v2/screenshots/virtual-clusters/field-app-namespace.png').default} />


### Access To Virtual Cluster
<Field crd="VirtualCluster" jsonPath="spec.access" type="Access[]" img={require('@site/static/media/v2/screenshots/virtual-clusters/field-access.png').default} />


## CRDs

### `VirtualCluster`
<APISpec pointer="#/components/schemas/com.github.loft-sh.agentapi.pkg.apis.loft.cluster.v1.VirtualCluster" />
